import java.util.*;

class Solution {
    public int[] solution(int N, int[] A) {
        int specialValue = N+1;
        int[] counters = new int[N];
        int maxValue = 0;

        for (int index = 0; index < A.length; index++) {
            int valueAtIndex = A[index];
            if (valueAtIndex == specialValue) {
                bumpAllToMax(counters, maxValue);
                continue;
            } else {
                int counterIndex = valueAtIndex - 1;
                bumpCounter(counters, counterIndex);
                maxValue = maxValue > counters[counterIndex] ? maxValue : counters[counterIndex];
            }
        }
        return counters;
    }

    private void bumpAllToMax(int[] counters, int maxValue) {
        for (int i = 0; i < counters.length; i++) {
            counters[i] = maxValue;
        }
    }

    private void bumpCounter(int[] counters, int countersIndex) {
        counters[countersIndex]++;
    }

    private void bumpMaxIfIsLessThanCurrentValue(int maxValue, int currentValue) {
        if (maxValue < currentValue) {
            maxValue = currentValue;
        }
    }
}
